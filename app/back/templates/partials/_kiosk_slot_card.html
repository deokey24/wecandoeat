{# ê³µí†µ ìŠ¬ë¡¯ ì¹´ë“œ ì¡°ê°: s ë³€ìˆ˜ ì‚¬ìš© #}
<div class="border rounded-lg p-3 flex flex-col gap-2 hover:border-blue-400 transition"
     data-slot-id="{{ s.slot_id }}"
     data-slot-label="{{ s.label }}"
     data-slot-board="{{ s.board_code }}"
     data-slot-max="{{ s.max_capacity }}"
     data-slot-stock="{{ s.current_stock }}"
     data-slot-low="{{ s.low_stock_alarm }}"
     data-slot-product-id="{{ s.product_id or '' }}"
     data-kiosk-product-id="{{ s.kiosk_product_id or '' }}">

  <!-- ìƒë‹¨: ìŠ¬ë¡¯ ë¼ë²¨/ë³´ë“œì½”ë“œ + í¸ì§‘/ì‚­ì œ ë²„íŠ¼ -->
  <div class="flex items-start justify-between gap-1">
    <div>
      <div class="text-xs font-semibold text-slate-700">
        {{ s.label }}
      </div>
      <div class="text-[10px] inline-flex items-center px-1.5 py-0.5 rounded-full bg-slate-100 text-slate-600 font-mono mt-0.5">
        {{ s.board_code }}
      </div>
    </div>

    {% if s.kiosk_product_id %}
      <div class="flex items-end gap-1">
        <!-- ìŠ¬ë¡¯ ì¬ë°°ì¹˜(ìƒí’ˆ ë³€ê²½ / ì¬ê³  ìˆ˜ì •) -->
        <button type="button"
                class="text-[10px] px-1.5 py-0.5 rounded border border-slate-300 text-slate-600 hover:bg-slate-50 js-open-slot-modal">
          âœ
        </button>
        <!-- ìŠ¬ë¡¯ ìƒí’ˆ ì‚­ì œ -->
        <form method="post"
              action="/kiosks/{{ kiosk.id }}/slots/{{ s.slot_id }}/clear"
              onsubmit="return confirm('ì´ ìŠ¬ë¡¯ì˜ ìƒí’ˆ ë§¤í•‘ì„ ì‚­ì œí• ê¹Œìš”?');">
          <button type="submit"
                  class="text-[10px] px-1.5 py-0.5 rounded border border-red-300 text-red-600 hover:bg-red-50">
            âœ•
          </button>
        </form>
      </div>
    {% endif %}
  </div>

  <!-- ì¤‘ì•™: ìƒí’ˆ ì¸ë„¤ì¼/ì •ë³´ or ë¹„ì–´ìˆì„ ë•Œ ì•ˆë‚´ -->
  {% if s.kiosk_product_id %}
    <div class="flex gap-3 items-center mt-1">
      {% if s.image_url %}
        <div class="w-14 h-14 rounded overflow-hidden bg-slate-100 flex-shrink-0">
          <img src="{{ s.image_url }}" alt="{{ s.product_name }}" class="w-full h-full object-cover">
        </div>
      {% else %}
        <div class="w-14 h-14 rounded bg-slate-100 flex items-center justify-center text-[10px] text-slate-400 flex-shrink-0">
          No Image
        </div>
      {% endif %}
      <div class="flex-1 min-w-0">
        <div class="text-xs font-medium line-clamp-2">
          {{ s.product_name }}
        </div>
        <div class="text-[11px] text-blue-600 font-semibold mt-0.5">
          {{ "{:,}".format(s.price) }}ì›
        </div>

        <!-- ğŸ”¹ ìŠ¬ë¡¯ì— ë°°ì¹˜ëœ ìƒí’ˆ ìì²´ ìˆ˜ì • ë§í¬ -->
        <a href="/kiosks/{{ kiosk.id }}/products/{{ s.kiosk_product_id }}/edit"
           class="mt-1 inline-block text-[11px] text-blue-500 underline">
          ì´ ìƒí’ˆ ì •ë³´ ìˆ˜ì •í•˜ê¸°
        </a>
      </div>
    </div>
  {% else %}
    <!-- ìƒí’ˆì´ ì—†ëŠ” ê²½ìš°: ì¤‘ì•™ì— ì•ˆë‚´ + ì¶”ê°€ ë²„íŠ¼ -->
    <div class="flex flex-col items-center justify-center text-center gap-2 mt-2 flex-1">
      <div class="text-xs text-slate-400">
        ë§¤í•‘ëœ ìƒí’ˆ ì—†ìŒ
      </div>
      <button type="button"
              class="px-2 py-1 rounded text-[11px] bg-blue-600 text-white hover:bg-blue-700 js-open-slot-modal">
        + ìƒí’ˆ ì¶”ê°€
      </button>
    </div>
  {% endif %}

  <!-- í•˜ë‹¨: ì¬ê³ /ìš©ëŸ‰ í‘œì‹œ -->
  <div class="mt-2 grid grid-cols-3 gap-2 text-[11px]">
    <div class="flex flex-col">
      <span class="text-slate-400">ìš©ëŸ‰</span>
      <span class="font-mono">{{ s.max_capacity }}</span>
    </div>
    <div class="flex flex-col">
      <span class="text-slate-400">ì¬ê³ </span>
      <span class="font-mono">{{ s.current_stock }}</span>
    </div>
    <div class="flex flex-col">
      <span class="text-slate-400">ì•Œë¦¼</span>
      <span class="font-mono">{{ s.low_stock_alarm }}</span>
    </div>
  </div>

  <!-- ì›ê²©ë°°ì¶œ (ì•„ì§ ë™ì‘ ë¯¸ì •ì´ë¼ë©´ ë²„íŠ¼ë§Œ ìœ ì§€) -->
  <div class="mt-2">
    <button type="button"
            class="w-full text-[11px] px-2 py-1 rounded bg-purple-600 text-white hover:bg-purple-700">
      ì›ê²©ë°°ì¶œ
    </button>
  </div>
</div>
